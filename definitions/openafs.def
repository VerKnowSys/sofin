. ./config
APP_FULL_NAME="Open Andrew File System"
APP_NAME="openafs-amd64-fbsd_82"
APP_VERSION="1.6pre6"
APP_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${APP_NAME}-${APP_VERSION}.tar.gz"
APP_CONFIGURE_SCRIPT="binary"
KERNEL_MODULE_FILE="/boot/kernel/libafs.ko"
APP_AFTER_INSTALL_CALLBACK="$CP_BIN -vr ${TMP_ROOT}${APP_NAME}-${APP_VERSION}/${APP_NAME}-${APP_VERSION}/* /usr/local; \
$CP_BIN -vf /usr/local${KERNEL_MODULE_FILE} $KERNEL_MODULE_FILE; \
$RM_BIN -rf /usr/local/boot; \
$KLDLOAD_BIN ${KERNEL_MODULE_FILE}; \
echo 'afsserver_enable=\"YES\"' >> /etc/rc.conf; \
echo 'afsd_enable=\"YES\"' >> /etc/rc.conf; \
$MKDIR_BIN /usr/local/etc/openafs/server; \
$MKDIR_BIN -p '${DFS_CACHE_DIR}'; \
$MKDIR_BIN -p '${DFS_MOUNT_POINT}'; \
$CP_BIN -vf /usr/local/etc/openafs/CellServDB.sample /usr/local/etc/openafs/server/CellServDB; \
echo '' > /usr/local/etc/openafs/server/KeyFile; \
echo '' > /usr/local/etc/openafs/server/UserList; \
echo '${HOST_NODE}' > /usr/local/etc/openafs/server/ThisCell; \
echo '${DFS_MOUNT_POINT}:${DFS_CACHE_DIR}:150000' > /usr/local/etc/openafs/cacheinfo; \
$SERVICE_BIN afsserver restart; \
$SERVICE_BIN afsd restart; \
$MKDIR_BIN ${SOFTWARE_DIR}/Openafs-amd64-fbsd_82-${APP_VERSION}; \
$TOUCH_BIN ${SOFTWARE_DIR}/Openafs-amd64-fbsd_82-${APP_VERSION}/INSTALLED_IN_USR_LOCAL; \
echo 'LibAFS installed.'"



