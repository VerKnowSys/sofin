DISABLE_ON="Darwin Linux"
APP_FULL_NAME="OpenJDK 1.7 64bit"
APP_SHA="99fd7ee4d490c235dccc33c7cc45b728bb1c72f7"
APP_NAME="Openjdk7"
APP_VERSION="1.7.0_011"
APP_HTTP_PATH="${MAIN_BINARY_REPOSITORY}${APP_NAME}-${APP_VERSION}.tar.bz2"
APP_CONFIGURE_SCRIPT="binary"
APP_AFTER_INSTALL_CALLBACK="${CP_BIN} -fR ${CACHE_DIR}cache/${APP_NAME}-${APP_VERSION}-${RUNTIME_SHA}/${APP_NAME}-${APP_VERSION}/ ${PREFIX}; ${TEST_BIN} ! -f /etc/ld-elf.so.conf && ${PRINTF_BIN} '/Software/${APP_NAME}/lib' > /etc/ld-elf.so.conf && ${SERVICE_BIN} ldconfig restart ; perform_symlink_update"
APP_EXPORTS="jconsole jdb jhat appletviewer jinfo jmap jar jps jarsigner jrunscript policytool java jstack registervm classpath javac jstat rmic javadoc jstatd rmid javah keytool rmiregistry javap javavm jcmd"
APP_CONFLICTS_WITH="Openjdk6"

perform_symlink_update () {
  jdk="openjdk7"
  for i in jcmd appletviewer jar jarsigner java javac javadoc javah javap jconsole jdb jhat jinfo jmap jps jrunscript jsadebugd jstack jstat jstatd keytool manvm orbd policytool registervm rmic rmid rmiregistry servertool unregistervm; do
    ${RM_BIN} -f "${PREFIX}/bin/${i}"
    ${LN_BIN} -s "${PREFIX}/${jdk}/bin/${i}" "${PREFIX}/bin/${i}"
  done
  for j in checkvms manvm; do
    ${RM_BIN} -f "${PREFIX}/bin/${j}"
    ${LN_BIN} -s "${PREFIX}/${jdk}/bin/javavm" "${PREFIX}/bin/${j}"
  done
}
