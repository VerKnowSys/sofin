APP_FULL_NAME="Passenger on Nginx"
APP_NAME="passenger"
APP_SHA="de5890155078cea3de68588b640cd32fb5e05615"
APP_VERSION="4.0.19"
APP_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${APP_NAME}-${APP_VERSION}.tar.gz"
APP_REQUIREMENTS="zlib bzip2 libiconv libxml2 gmake libtool libgpg-error libgcrypt libxslt yaml curl libffi perl openssl python-legacy scons readline ruby"
APP_CONFIGURE_SCRIPT="ignore"
APP_MAKE_METHOD="${PRINTF_BIN} 'gem: --no-ri --no-rdoc' > ${HOME}/.gemrc; ${PREFIX}/bin/gem install bundler rack --force"
APP_COMPILER_ARGS="-pthread"
APP_AFTER_PATCH_CALLBACK="${CP_BIN} -r ${CACHE_DIR}cache/${APP_NAME}-${APP_VERSION}/${APP_NAME}-${APP_VERSION} ${PREFIX}/lib/${APP_NAME}"
if [ "${SYSTEM_NAME}" != "Darwin" ]; then
    export ADDITION=" -Wl,-rpath=${PREFIX}/lib,--enable-new-dtags"
    export EXTRA_CC="${SOFTWARE_ROOT_DIR}Clang/exports/clang"
    export EXTRA_CXX="${SOFTWARE_ROOT_DIR}Clang/exports/clang++"
else
    export EXTRA_CC="/usr/bin/clang"
    export EXTRA_CXX="/usr/bin/clang++"
fi
EXTRA_CFLAGS="-I${PREFIX}/include"
EXTRA_CXXFLAGS="-I${PREFIX}/include"
EXTRA_LDFLAGS="-L${PREFIX}/lib${ADDITION}"
EXTRA_NGINX_CONF_FLAGS="--with-http_ssl_module --with-http_gzip_static_module --user=nobody --group=nogroup --with-cc-opt='${EXTRA_CFLAGS}' --with-ld-opt='${EXTRA_LDFLAGS}'"
APP_INSTALL_METHOD="EXTRA_CFLAGS='${EXTRA_CFLAGS}' EXTRA_CXXFLAGS='${EXTRA_CXXFLAGS}' EXTRA_LDFLAGS='${EXTRA_LDFLAGS}' CC=${EXTRA_CC} CXX=${EXTRA_CXX} ${PREFIX}/bin/ruby ${PREFIX}/lib/${APP_NAME}/bin/passenger-install-nginx-module --auto --auto-download --prefix=${PREFIX} --extra-configure-flags=\"${EXTRA_NGINX_CONF_FLAGS}\""
APP_EXPORTS="passenger nginx bundle rack rake gem irb ruby ri rdoc erb"
APP_CONFLICTS_WITH="Rubinius Jruby Ruby-legacy Ruby-minimal Ruby Nginx Ruby18"
