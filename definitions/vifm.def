APP_FULL_NAME="VI File Manager"
APP_NAME="vifm"
APP_VERSION="0.7.4b+gh_master"
APP_SHA="9d2c0272c78154eae43a895094a8e392d1d0f083"
APP_REQUIREMENTS="gmake ncurses"
APP_CONFIGURE_ARGS="--disable-desktop-files --without-X11 --without-gtk --enable-extended-keys --with-curses=${PREFIX} CFLAGS=-I${PREFIX}/include/ncursesw LDFLAGS='-L${PREFIX}/lib'"
APP_EXPORTS="vifm vifm-pause vifmrc-converter"
APP_MAKE_METHOD="gmake -s"
APP_INSTALL_METHOD="gmake -s install"

case "${SYSTEM_NAME}" in

  Darwin)
    export APP_CONFIGURE_ARGS="--disable-desktop-files --without-X11 --without-gtk --enable-extended-keys"
    ;;

esac

APP_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${APP_NAME}-${APP_VERSION}.tar.bz2"
APP_AFTER_INSTALL_CALLBACK="update_vifm_default_config"

update_vifm_default_config () {
  ${MKDIR_BIN} "$HOME/.vifm"
  ${MV_BIN} "$HOME/.vifm/vifmrc" "$HOME/.vifm/vifmrc.old-$(${DATE_BIN} +%Y-%m-%d-%H-%M-%S)"
  ${PRINTF_BIN} "
set vicmd=vim
set history=100
set followlinks
set sortnumbers
set undolevels=100
set runexec
set iec
set trash
set nofastrun
set wildmenu
set ignorecase
set smartcase
set hlsearch
set incsearch

nmap <f2> :chmod<cr>
nmap <f3> :!less %%f<cr>
nmap <f4> :edit<cr>
nmap <f5> :!cp %%f %%D<cr>
nmap <f6> :!mv %%f %%D<cr>
nmap <f7> :!mkdir<space>
nmap <f8> :delete<cr>

nmap s :sh<cr>
nmap S :sort<cr>
nmap w :view<cr>
nmap h :cd ~<cr>
nmap C :chmod<cr>
nmap r :!./%%c<space>

windo normal zo

set vifminfo=dhistory,savedirs,chistory,state,tui,shistory,phistory,dirstack,registers,bookmarks

execute 'set statusline=\"  %%t%%= %%A %%10u:%%-7g %%15s %%20d     logged as: '.\$USER.'  \"'

windo set viewcolumns=-{name}..,7{uname},7{gname},7{mtime},11{perms},9{}

colorscheme dmilith-user

" > "$HOME/.vifm/vifmrc"
  ${MKDIR_BIN} "$HOME/.vifm/colors"
  ${MV_BIN} "$HOME/.vifm/colors/dmilith-user" "$HOME/.vifm/colors/dmilith-user-$(${DATE_BIN} +%Y-%m-%d-%H-%M-%S)"
  ${PRINTF_BIN} "
highlight Win cterm=none ctermfg=white ctermbg=black
highlight Directory cterm=bold ctermfg=cyan ctermbg=black
highlight Link cterm=bold ctermfg=yellow ctermbg=black
highlight BrokenLink cterm=bold ctermfg=red ctermbg=none
highlight Socket cterm=bold ctermfg=magenta ctermbg=black
highlight Device cterm=bold ctermfg=red ctermbg=black
highlight Fifo cterm=bold ctermfg=cyan ctermbg=none
highlight Executable cterm=bold ctermfg=green ctermbg=black
highlight Selected cterm=bold ctermfg=magenta ctermbg=black
highlight CurrLine cterm=bold ctermfg=white ctermbg=30
highlight TopLine cterm=bold ctermfg=white ctermbg=blue
highlight TopLineSel cterm=bold ctermfg=yellow ctermbg=blue
highlight StatusLine cterm=bold ctermfg=white ctermbg=blue
highlight WildMenu cterm=underline,reverse ctermfg=white ctermbg=black
highlight CmdLine cterm=none ctermfg=white ctermbg=black
highlight ErrorMsg cterm=none ctermfg=red ctermbg=black
highlight Border cterm=none ctermfg=black ctermbg=blue
" > "$HOME/.vifm/colors/dmilith-user"

}