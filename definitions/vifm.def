APP_FULL_NAME="VI File Manager"
APP_NAME="vifm"
APP_VERSION="0.7.4b+gh_fix"
APP_SHA="e6d31946fa5baa652e59e959d6973646097184cc"
APP_REQUIREMENTS="gmake ncurses"
APP_CONFIGURE_ARGS="--disable-desktop-files --without-X11 --without-gtk --enable-extended-keys --with-curses=${PREFIX} CFLAGS=-I${PREFIX}/include/ncursesw LDFLAGS='-L${PREFIX}/lib'"
APP_EXPORTS="vifm vifm-pause vifmrc-converter"
APP_MAKE_METHOD="gmake -s"
APP_INSTALL_METHOD="gmake -s install"

case "${SYSTEM_NAME}" in

  Darwin)
    export APP_CONFIGURE_ARGS="--disable-desktop-files --without-X11 --without-gtk --enable-extended-keys"
    ;;

esac

APP_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${APP_NAME}-${APP_VERSION}.tar.bz2"
APP_AFTER_INSTALL_CALLBACK="update_vifm_default_config"

update_vifm_default_config () {
  ${MKDIR_BIN} $HOME/.vifm
  ${MV_BIN} $HOME/.vifm/vifmrc $HOME/.vifm/vifmrc.old
  ${PRINTF_BIN} "
set vicmd=vim
set history=100
set followlinks
set sortnumbers
set undolevels=100
set runexec
set iec
set trash
set nofastrun
set wildmenu
set ignorecase
set smartcase
set hlsearch
set incsearch

nmap <f3> :!less %%f<cr>
nmap <f4> :edit<cr>
nmap <f5> :!cp %%f %%D<cr>
nmap <f6> :!mv %%f %%D<cr>
nmap <f7> :!mkdir<space>
nmap <f8> :delete<cr>

nmap s :sh<cr>
nmap S :sort<cr>
nmap w :view<cr>
nmap h :cd ~<cr>
nmap c :chmod<cr>
nmap r :!./%%c<space>

windo normal zo

set vifminfo=dhistory,savedirs,chistory,state,tui,shistory,phistory,dirstack,registers,bookmarks

windo set viewcolumns=-{name}..,7{uname},7{gname},7{mtime},9{}
" > $HOME/.vifm/vifmrc

}