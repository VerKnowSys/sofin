<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Sofin by VerKnowSys</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>Sofin</h1>
        <p>SOFtware INstaller. Designed for BSD and DARWIN.</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/VerKnowSys/sofin" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/VerKnowSys/sofin/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/VerKnowSys/sofin/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h2>
<a name="author" class="anchor" href="#author"><span class="octicon octicon-link"></span></a>Author:</h2>

<ul>
<li>Daniel (dmilith) Dettlaff (dmilith [at] verknowsys.com). I'm also on #verknowsys @ freenode IRC.</li>
</ul><h2>
<a name="definition-authors" class="anchor" href="#definition-authors"><span class="octicon octicon-link"></span></a>Definition authors:</h2>

<ul>
<li>Daniel (dmilith) Dettlaff</li>
<li>Michał (tallica) Lipski</li>
</ul><h2>
<a name="contributors" class="anchor" href="#contributors"><span class="octicon octicon-link"></span></a>Contributors:</h2>

<ul>
<li>Michał (tallica) Lipski</li>
</ul><h2>
<a name="thanks" class="anchor" href="#thanks"><span class="octicon octicon-link"></span></a>Thanks:</h2>

<ul>
<li>Tymon (teamon) Tobolski (ideas of improvments)</li>
</ul><h2>
<a name="about" class="anchor" href="#about"><span class="octicon octicon-link"></span></a>About:</h2>

<p>This software is my way of how to get reliable, updatable, bundled, closed-dependency, secure and fully
customizable software for FreeBSD servers. Darwin (Mac OS X) support started with version &gt;=0.14.10. Linux support started with version &gt;=0.24.4 and ended with 0.51.9. If you wish me to continue Linux support, please consider a donation.</p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features:</h2>

<ul>
<li>Designed to work on all *BSD (FreeBSD &gt;=9.x), *Darwin (OSX &gt;=10.8.x)</li>
<li>User friendly, clean and clear colorful information. No magic. KISS, DRY, BDD driven development.</li>
<li>Simple, ~1k LOC solution, written in legacy /bin/sh shell scripting language.</li>
<li>Every "software" has own definition ("def" file) with defined flat dependency list and basic information.
Every definition is sh script itself (More in <a href="https://github.com/VerKnowSys/sofin/blob/master/definitions/skeleton.def.sample">skeleton.def</a> and <a href="https://github.com/VerKnowSys/sofin/blob/master/definitions/defaults.def">defaults.def</a>)</li>
<li>Supports selective application installation or from list. (By "install" param. More in <a href="https://github.com/VerKnowSys/sofin#examples">examples</a>).</li>
<li>Supports installation of user and system wide applications (more in <a href="https://github.com/VerKnowSys/sofin#examples">examples</a>).</li>
<li>Has simple flat dependency managment. Sofin architecture is flexible enough to bundle almost any mix of requirements in application bundle, if only it's supported by given software. No need to install tons of useless/ not needed dependencies just because software supports it.</li>
<li>Has simple way of creating "lists" of definitions to build. Just create a text file with your definitions in "lists/" directory, create/update definitions snapshot (using sofin-make-defs) and give that list filename to sofin as parameter (more in <a href="https://github.com/VerKnowSys/sofin#examples">examples</a>).</li>
<li>Software patches are supported out of the box. The only thing required is to put patches into "definitions/patches/definition_file_name_without_def_extension/" directory. Sofin will do the rest.</li>
<li>Software bundling. Every application is bundled separately with all dependencies in own root directory. The only external dependencies used by Sofin are those from base system. No other external dependencies allowed at all.</li>
<li>Uses definitions snapshots in "tar.gz" format, generated by "sofin-make-defs" script also available in this repository. Currently You need to manually put generated "defs.tar.gz" into remote repository (defined in MAIN_SOURCE_REPOSITORY variable).</li>
<li>Supports basic "marking" of status of installed applications/ dependencies to resume broken/ failed/ interrupted installation.</li>
<li>You may feel safe upgrading only <em>one</em> software bundle without headache of "how it affects rest of my software". No application bundle will affect any other. Ever.</li>
<li>Sofin is designed to not touch any part of system. The only exception is /etc/profile_sofin created after system wide software installation (/Software/) in ServeD system.</li>
<li>By default Sofin verbosity is limited to minimum. More detailed information is written to LOG file (located in /Software/.cache/install.log by default or /Users/USER_NAME/.cache/install.log)</li>
<li>Exports. Each app has own ROOT_DIR/exports/ with symlinks to exported software. Exported software are just simple symlinks used to generate PATH environment variable.</li>
<li>Sofin has own configuration file: <a href="https://github.com/VerKnowSys/sofin/blob/master/sofin.conf.sh">sofin.conf.sh</a> which is SH script itself.</li>
<li>Supports parallel builds by default (from version 0.24.5)</li>
<li>Supports custom callbacks executed in order as follows:

<ul>
<li>APP_AFTER_UNPACK_CALLBACK (executed after software unpack process)</li>
<li>APP_AFTER_PATCH_CALLBACK (executed after software patch process)</li>
<li>APP_AFTER_CONFIGURE_CALLBACK (executed after software configuration process)</li>
<li>APP_AFTER_MAKE_CALLBACK (executed after software compilation process)</li>
<li>APP_AFTER_INSTALL_CALLBACK (executed after software installation process)</li>
<li>APP_AFTER_EXPORT_CALLBACK (executed after final stage of exporting software executables)
Each callback can be sh function itself and to be called by name. Look into <a href="https://github.com/VerKnowSys/sofin/blob/master/definitions/sbt.def">sbt.def</a> for an example createLaunchScript().</li>
</ul>
</li>
<li>Supports collisions between definitions through APP_CONFLICTS_WITH option since version 0.38.0. An example in <a href="https://github.com/VerKnowSys/sofin/blob/master/definitions/ruby.def">ruby.def</a>
</li>
<li>Supports binary builds of software bundles and requirements since 0.47.2</li>
<li>Since version 0.51.0, Sofin automatically avoids using software binary builds, that won't work on given host. In that case, software will be built from source. Minimum system requirements for binary builds to work, depend on platfrom:

<ul>
<li>FreeBSD: OS version &gt;= 9.1

<ul>
<li>Darwin: OS version &gt;= 12.4</li>
</ul>
</li>
</ul>
</li>
</ul><h2>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples:</h2>

<ul>
<li>
<p>Install all available software defined in a list called "all":</p>

<div class="highlight highlight-bash"><pre>sofin install all
</pre></div>
</li>
<li>
<p>Install one software from definition called "ruby.def" for current user:</p>

<div class="highlight highlight-bash"><pre>sofin install ruby
</pre></div>
</li>
<li>
<p>Install software list called "databases" for current user:</p>

<div class="highlight highlight-bash"><pre>sofin install databases
</pre></div>
</li>
<li>
<p>Show list of available software:</p>

<div class="highlight highlight-bash"><pre>sofin available
</pre></div>
</li>
<li>
<p>Show list of installed software:</p>

<div class="highlight highlight-bash"><pre>sofin fullinstalled
</pre></div>

<p>or</p>

<div class="highlight highlight-bash"><pre>sofin installed
</pre></div>
</li>
<li>
<p>Export "ruby" binary from "Passenger" bundle:</p>

<div class="highlight highlight-bash"><pre>sofin <span class="nb">export </span>ruby Passenger
</pre></div>
</li>
<li>
<p>Uninstall installed software "SomeApp"?</p>

<div class="highlight highlight-bash"><pre>sofin uninstall someApp
</pre></div>
</li>
<li>
<p>Create a list called "databases", with definitions: "postgresql" and "mysql", and install it with Sofin:</p>

<div class="highlight highlight-bash"><pre><span class="nb">cd </span>Sofin
<span class="nb">echo</span> <span class="s2">"postgresql\nmysql"</span> &gt; lists/databases
./push-definitions <span class="c"># to create a snapshot and upload it to Your remote respository.</span>
sofin install databases
</pre></div>
</li>
</ul><h2>
<a name="differences-from-posix-and-fhs-standards" class="anchor" href="#differences-from-posix-and-fhs-standards"><span class="octicon octicon-link"></span></a>Differences from <a href="https://en.wikipedia.org/wiki/POSIX">POSIX</a> and <a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">FHS</a> standards:</h2>

<ul>
<li>Sofin provides a slightly different approach to shell PATH variable. By default user PATH variable is overriden to include APP-PREFIX/exports instead of default APP-PREFIX/(s)bin. After each successful software installation sofin will populate APP-PREFIX/exports with relative symlinks to existing binaries of bundle. Application exports are defined in "APP_EXPORTS" variable (available for any definition).</li>
<li>Sofin suggests empty /usr/local folder. It's caused by POSIX "shared nature" of /usr/local. Sofin was built against this rule to prevent cross requirements between prefixes (/opt/X11 is an exception on Darwin), and to make sure that each software is easily movable between machines with same architecture.</li>
<li>Each application has own "root" directory (Similar to Mac OS X software in *.app folders).</li>
<li>Each software bundle includes all dependencies of given software, hence application bundle requires more disk
space than it does with "old fasioned, system wide, shared software".</li>
</ul><h2>
<a name="pitfalls-limitations" class="anchor" href="#pitfalls-limitations"><span class="octicon octicon-link"></span></a>Pitfalls/ Limitations:</h2>

<ul>
<li>Windows isn't supported, but Sofin will run just fine everywhere after a couple of configuration fights.</li>
<li>Sofin is designed, tested and heavy supported under both 64bit: FreeBSD 9.1 and Darwin 12.2.0, but it should also work on any compliant architectures as well.</li>
<li>Currently all official Sofin software used by current definitions is mirrored only on <a href="http://software.verknowsys.com/source">software.verknowsys.com</a>.</li>
<li>Currently some definitions provided by Sofin include a couple of custom patches on software required by VerKnowSys ServeD © System. Patches (if any) usually come from current <a href="http://www.freebsd.org/ports/index.html">FreeBSD ports</a>.</li>
<li>Some definitions with X11 requirement will need <a href="http://xquartz.macosforge.org/landing/">XQuartz</a> installation. (Darwin hosts only).</li>
</ul><h2>
<a name="installation-info-platform-specific" class="anchor" href="#installation-info-platform-specific"><span class="octicon octicon-link"></span></a>Installation info (platform specific):</h2>

<h3>
<a name="freebsd-specific" class="anchor" href="#freebsd-specific"><span class="octicon octicon-link"></span></a>FreeBSD specific:</h3>

<ul>
<li>Install base 64bit system - I used 64bit FreeBSD 9.1 bootonly iso here.</li>
<li>
<p>Run as root:</p>

<pre><code>fetch -o - http://dmilith.verknowsys.com/Public/sofin-install-from-scratch.sh | sh
</code></pre>

<p>It will put "sofin" into <code>/usr/bin/</code> and <code>sofin.conf.sh</code> into <code>/etc/</code>.</p>
</li>
<li>
<p>Build core software. Run:</p>

<pre><code>sofin install base
</code></pre>

<p>as root.</p>
</li>
<li><p>Start using sofin as regular user.</p></li>
</ul><h3>
<a name="darwin-mac-os-x-specific" class="anchor" href="#darwin-mac-os-x-specific"><span class="octicon octicon-link"></span></a>Darwin/ Mac OS X specific:</h3>

<ul>
<li>Install Mac OS X 10.8.</li>
<li>Install <a href="http://xquartz.macosforge.org/landing/">XQuartz</a> (if you want to build definitions that require X11)</li>
<li>
<p>Run:</p>

<pre><code>curl http://dmilith.verknowsys.com/Public/sofin-install-from-scratch.sh | sh
</code></pre>

<p>It will put "sofin" in <code>/usr/bin/</code> and <code>sofin.conf.sh</code> in <code>/etc/</code>.</p>
</li>
<li>
<p>Build core software. Run:</p>

<pre><code>sudo sofin install base
</code></pre>
</li>
<li><p>Start using sofin as regular user.</p></li>
</ul><p>It will put "sofin" into /usr/bin/ and sofin.conf.sh into /etc/.</p>

<ul>
<li>
<p>Build core software. Run as root:</p>

<pre><code>sofin install base
</code></pre>
</li>
<li><p>Start using sofin as regular user.</p></li>
</ul><h2>
<a name="conflicts-problems-known-issues" class="anchor" href="#conflicts-problems-known-issues"><span class="octicon octicon-link"></span></a>Conflicts/ Problems/ Known issues:</h2>

<ul>
<li>Latest versions of OSX 10.8 lack GNU compiler (even through Xcode command line utilities, the only available compiler is Clang). Due to this fact, it is required to have installed binaries: <code>/usr/bin/llvm-gcc</code> <code>/usr/bin/llvm-g++</code> and <code>/usr/bin/llvm-cpp-4.2</code> on your system. (Only if you want Sofin to build software that requires GNU compiler). In older versions of Xcode (=&lt;4.1) this compiler is built in and usually resides in <code>/usr/llvm-gcc-4.2</code> directory and is linked to <code>/usr/bin</code>. I uploaded this compiler taken from my 10.8 system. It's available <a href="http://software.verknowsys.com/binary/Darwin-x86_64-common/llvm-gcc-4.2-prebuilt.tar.bz2">here</a>. Put it anywhere and make symlinks to <code>/usr/bin</code> to solve this issue permanently.</li>
<li>Sofin build mechanism is known to be in conflict with other software managment solutions like: BSD Ports, HomeBrew, MacPorts, Fink. Keep that in mind before reporting problems.</li>
<li>It's recommended to change shell by doing: <code>chsh -s /Software/Zsh/exports/zsh</code> for each user which will use Sofin. It's caused shells that don't read standard default shell initialization scripts like /etc/zshenv.</li>
</ul><h2>
<a name="faq" class="anchor" href="#faq"><span class="octicon octicon-link"></span></a>FAQ:</h2>

<ul>
<li>"Definition 'name' is broken and it doesn't build on my system!" - Usually caused by conflicting software, installed in system paths (f.e. /usr/bin, /usr/lib, /usr/local). Sofin implies clean base system.</li>
<li>"It's not working!". Contribute with a fix!</li>
</ul><h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License:</h2>

<ul>
<li>Released under the <a href="http://opensource.org/licenses/BSD-2-Clause">BSD</a> license.</li>
</ul>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/VerKnowSys">VerKnowSys</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>