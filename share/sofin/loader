#!/usr/bin/env sh

load_facts () {
    for fact in $*; do
        . /usr/share/sofin/facts/${fact}
    done
}


load_funs () {
    for fun in $*; do
        . /usr/share/sofin/funs/${fun}
    done
}


load_sofin () {

    # loading facts
    load_facts  \
                core.fact \
                paths.fact \
                paths-OS_TYPE.fact \
                alternatives.fact \
                system.fact \
                terminal.fact \
                sofin.fact

    # loading funs
    load_funs \
                core.fun \
                validations.fun \
                commons.fun \
                envs.fun \
                internals.fun \
                cleaners.fun \
                caches.fun \
                definitions.fun \
                datasets.fun \
                build.fun

    # initial validations
    setup_def_branch
    setup_def_repo
    check_os
    check_defs_dir
    trap_signals
}

load_sofin
