#!/usr/bin/env sh

load_facts () {
    for _fact in $*; do
        . ${DEFAULT_FACTS_DIR:-"/usr/share/sofin/facts/"}${_fact}
    done
    unset _fact
}


load_funs () {
    for _fun in $*; do
        . ${DEFAULT_FUNS_DIR:-"/usr/share/sofin/funs/"}${_fun}
    done
    unset _fun
}


load_sofin () {

    # loading facts
    load_facts  \
                core.fact \
                paths.fact \
                paths-OS_TYPE.fact \
                alternatives.fact \
                system.fact \
                terminal.fact \
                sofin.fact

    # loading funs
    load_funs \
                core.fun \
                validations.fun \
                commons.fun \
                envs.fun \
                internals.fun \
                cleaners.fun \
                caches.fun \
                definitions.fun \
                datasets.fun \
                build.fun

    # initial validations
    setup_def_branch
    setup_def_repo
    check_os
    check_defs_dir
    trap_signals
}

load_sofin
