load_facts () {
    for fact in $*; do
        . /usr/share/sofin/facts/${fact}
    done
}


load_funs () {
    for fun in $*; do
        . /usr/share/sofin/funs/${fun}
    done
}


load_sofin () {
    if [ -z "${HOME}" ]; then
        HOME="/tmp"
    fi

    # loading facts
    load_facts  \
                paths.fact \
                paths-OS_TYPE.fact \
                system.fact \
                terminal.fact \
                sofin.fact

    # loading funs
    load_funs \
                core.fun \
                validations.fun \
                commons.fun \
                envs.fun \
                internals.fun \
                cleaners.fun \
                caches.fun \
                definitions.fun \
                datasets.fun \
                build.fun

    # initial validations
    setup_default_branch
    setup_default_repository
    check_os
    check_definition_dir
}

load_sofin
